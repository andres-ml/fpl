# Functional PHP Library

This library provides a series of curried, data-last functions commonly used within the functional programming paradigm.

```php
use function Aml\Fpl\{partial};
use const Aml\Fpl\{map};

$multiplyItemsBy2 = partial(map, function($x) { return $x * 2; });
$multiplyItemsBy2([1, 2, 3]); // [2, 4, 6]
```

## API
 Full api documentation can be found in [docs/api.md](docs/api.md)

## Function or const
As we can see above, due to how PHP works, we need a separate `use` statement if we want to pass a function as a parameter. We have two ways to circumvent that behavior:

* Use the namespace
```php
use Aml\Fpl;

$multiplyItemsBy2 = Fpl\partial(Fpl\map, function($x) { return $x * 2; });
$multiplyItemsBy2([1, 2, 3]); // [2, 4, 6]
```
* Make use of automatic currying. This is valid only for functions that have at least 1 fixed argument; otherwise calling the function would resolve it.
```php
use function Aml\Fpl\{partial, map};

// note that we use 'map()' instead of just 'map'
$multiplyItemsBy2 = partial(map(), function($x) { return $x * 2; });
$multiplyItemsBy2([1, 2, 3]); // [2, 4, 6]
```
 
## Arrays and iterators

List-related functions return an array when they receive an array parameter, but they return iterators when receiving iterators (and can thus behave lazily). You can force laziness over an initial array by previously using `toIterator` or finish off with an array by ending with `toArray`:
```php
use Aml\Fpl;

$lowerThan4 = function($x) { return $x < 4; };

Fpl\takeWhile($lowerThan4, [0, 1, 2, 3, 4, 5]); // [0, 1, 2, 3]

$pickLowerThan4 = Fpl\compose(
    Fpl\toArray
    Fpl\takeWhile($lowerThan4),
    Fpl\counter
);

$pickLowerThan4(); // [0, 1, 2, 3]
```

If you want, you can use the original function definitions instead. Note that these are not curried and don't have their corresponding `const` versions.

```php
use function Aml\Fpl\functions\{map};
```

## Code generation

Functions are defined on `src/api/*.php`. They are split among different files but share the `Aml\Fpl\functions` namespace. All functions defined on those files not beginning with an underscore `_` will be parsed and added to `build/api.php` as calls to their curried versions.

Code can be generated by running `make code`.

## Testing

Testing is done through phpunit: `./vendor/bin/phpunit tests` or `make test`

## Note on performance

Automatic currying and automatic array/iter support have a performance overhead. Be wary of using them in a time-critical loop; a native `array_map` will always be faster than other implementations of `map`.

